# What happened to the data warehouse?

*It's a sandwich, a floppy disk, and an iPhone. *

---

![the iphone launch](https://substackcdn.com/image/fetch/$s_!dE93!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fadde7e64-cb4c-47a6-b845-d66119c75cb1_1280x720.jpeg)
*What could have been.*

Here's a [manic idea](https://benn.substack.com/p/the-internet-2022#footnote-anchor-2-85372487:~:text=Could%20dbt%20and%20S3%20be%20the%20next%20cloud%20data%20warehouse%3F)—let’s run dbt directly on top of S3. 

Admittedly, it stresses me out to suggest that, for two reasons. First, I don’t entirely understand what I’m proposing. There’s an outline that makes sense—dbt can now [compile queries](https://docs.getdbt.com/docs/use-dbt-semantic-layer/dbt-semantic-layer#product-architecture), so why not compile them into something that could be run by a generic Lambda function or an EC2 machine against a bunch of Parquet files in S3?—but I have no idea what technical issues, both big and small, would have to be worked through to make this possible. [Computers are above my pay grade. ](https://www.evernote.com/shard/s58/client/snv?noteGuid=fefd12d0-7824-4255-b27e-e6dc8e1ea203&noteKey=78ad63094298178f&sn=https%3A%2F%2Fwww.evernote.com%2Fshard%2Fs58%2Fsh%2Ffefd12d0-7824-4255-b27e-e6dc8e1ea203%2F78ad63094298178f&title=Screenshot%2B11%252F23%252F22%252C%2B10%253A56%2BAM)

Second, in the last couple years, the data industry has mostly settled on how to design the lower levels of a data stack. After flirting with a bunch of NoSQL and Hadoop architectures—one of the premier data conferences in 2014, called *[Hadoop World](https://www.oreilly.com/content/top-keynotes-at-strata-conference-and-strata-hadoop-world-2014/)*, had tracks like “Hadoop and Beyond” and “Hardcore Data Science”—we agreed on an orderly peace.[^1] Every data stack needs an ETL tool that spiders its way into various data sources and ingests them into a centralized location; it needs that location, typically a warehouse that both stores the data and provides a means for running queries (or [fancier operations](https://www.databricks.com/product/machine-learning)) on top of it it; and the stack needs a transformation tool—i.e., dbt—where teams can define business logic that regularly tell the warehouse how to turn its messy raw data into something fit for human consumption. Each of these three territories is well understood and well defined. The borders between them are clear and uncontested. [It feels good](https://www.buzzfeed.com/connorrdunlap/perfect-fits-that-will-make-you-say-oh-my-god-thats).

The top layer—how we cooked with our data, once the other tools [put it all in its place](https://en.wikipedia.org/wiki/Mise_en_place)—is the only problem left to solve. BI, analytics, AI tools, data apps, data observability systems, data discovery platforms, data catalogs, and a half dozen other categories desperately trying not to be BI[^2] still live in the wilderness, at war, on the other side of the wall. Once we civilize those [barbarian hordes](https://benn.substack.com/p/business-in-the-back-party-in-the-front#:~:text=Instead%2C%20the%20front,is%20coming.), we can all [move on from talking about the tools to “doing the work.”](https://benn.substack.com/p/day-of-reckoning)[^3] 

The alarming truth, I’m realizing, is that the three layers underneath our disorganized outer boundary aren’t actually so stable after all. Specifically, the data warehouse—the anchor, the main beam, the hub around which even ETL and transformation tools spin—has already started to break apart. And an idea like replacing the whole thing with dbt and some CSVs in Azure isn’t actually a deranged dive into some unhinged chaos; it may well be exactly where we’re headed.

# Take us to your warehouse

Suppose [the aliens](https://www.nytimes.com/article/ufo-spy-balloons-china.html) are real,[^4] but weird. They manage to sneak one of their ships through our now-robust balloon popping defenses. Fortunately for us, given how eagerly we shot down their first envoys, they come in peace—they’re pedantic linguists, on a mission to inventory the galaxy into a tidy dictionary that explains how words are commonly understood. “Give us a series of yes or no questions,” they tell us, “that will conclusively tell us if the data community agrees that something is a data warehouse. And we don’t want a textbook definition; we want to know what people think of when someone says warehouse.’”[^5] 

If we can give this to them, our sins will be forgiven, and they’ll go on their merry way. But if we can’t, they’ll annihilate the planet, because our indecision and frustrating inexactitude is [a blemish on their perfectly arranged universe](https://www.tiktok.com/@tired_actor/video/7003006051024981254?lang=en).

As someone who’s helped [build a product that connects to data warehouses](https://mode.com/), who regularly uses warehouses (and has [plenty of pedantic opinions](https://mode.com/blog/should-sql-queries-use-trailing-or-leading-commas/) of my own about that), and writes a blog [about](https://benn.substack.com/p/the-end-of-big-data) [warehouse](https://benn.substack.com/p/how-snowflake-fails) [vendors](https://benn.substack.com/p/the-original-purple-people), I should probably be able to give our fussy foreigners an answer. But I can’t. I have no clue how to tell them what a warehouse is. I can name a bunch of examples—Redshift is one; so is Snowflake; Excel is not—but they’re not based on a clean set of rules. It’s classification by feel, by vibe, by Supreme Court Justice Potter Stewart's famous ruling on what defines porn: "[I'll know it when I see it.](https://en.wikipedia.org/wiki/I_know_it_when_I_see_it)"

To define a data warehouse is to define a sandwich: Every attempt has weird and unacceptable exceptions. A sandwich is meat between bread? A PB&J isn’t a sandwich and a hot dog is. A sandwich must have [two separate pieces of bread](https://www.foxnews.com/story/massachusetts-judge-settles-dispute-by-ruling-burrito-is-not-a-sandwich#:~:text=The%20difference%2C%20the%20judge%20ruled%2C%20comes%20down%20to%20two%20slices%20of%20bread%20versus%20one%20tortilla.)? Most [cheesesteaks](https://www.youtube.com/watch?v=SCMi9YGyRQU) aren’t sandwiches and tiramisu is. A sandwich is food surrounded by leavened bread? Ice cream sandwiches aren’t sandwiches and soup in a bread bowl is. By *two* pieces of leavened bread? Fine, put on of those [little caps](https://images.app.goo.gl/C4xyybFMVjogoxH16) on the bowl.

Do this for data warehouses, and we tie ourselves in the same impossible knots. Warehouses are where data is physically stored? Consider Snowflake, which can query from [external data sources](https://docs.snowflake.com/en/user-guide/tables-external-intro) like S3 and Google Cloud Storage. If I used this feature, I’d still refer to Snowflake as my warehouse; by creating external tables, the warehouse wouldn’t magically transfer itself from Snowflake to S3. 

Are they compute engines? If this were true, it’d force us to conclude that a Python notebook, running Pandas on top of Parquet files, is a warehouse, which definitely doesn’t seem right. 

“Sources of truth?" This one is almost laughable, given that most warehouses today are aggregators of data from other places, like software applications and third-party SaaS apps. In this way, warehouses are the map to other sources’ territories. 

Perhaps a data warehouse is all of these things—they are, [as Oracle says](https://www.oracle.com/database/what-is-a-data-warehouse/), the storage, the compute engine, and the database management system that knows how the whole thing is organized and accessed. But that’d imply that some stacks, like one that uses Presto’s query engine on top of files in Azure, have warehouses that are split across different vendors. That’s uncomfortable—but not nearly as uncomfortable as this definition also implying that Excel, which stores data, processes it, and provides interfaces for accessing it, is a warehouse. Outside of the inevitable Hacker News food fights about whether [Excel ](https://news.ycombinator.com/item?id=1430383)*[ackshually](https://news.ycombinator.com/item?id=1430383)*[ is or isn't a database](https://news.ycombinator.com/item?id=1430383), most analysts would agree—nay, *plead*—that Excel is neither a database nor a warehouse.[^6] 

To make matters even more complicated, our definitions of warehouses are path dependent. [Amazon Athena](https://aws.amazon.com/athena/), a standalone query engine that has never stored data itself, is nearly identical to a Snowflake deployment that only queries external tables. But because Athena has always just been the engine, and because Snowflake usually stores data, we’d be more inclined to call the latter a warehouse than the former, even if both are used in the same way. In other words, if [you start with a ship](https://en.wikipedia.org/wiki/Ship_of_Theseus), you can strip it down to just a few planks and still call it a ship. But if you created the same object by nailing a few planks together, it’s just a [shoddy raft](https://www.youtube.com/watch?v=alpbLYmny4M). 

# The skeuomorphic database

Another definition—the most reasonable one, probably—could be: Who cares? There are no aliens. Why do we need a definition for a warehouse at all?

Mostly, we don’t. Just as 24-hour cable news networks have to fill late-night airtime with [squawking clowns](https://www.foxnews.com/shows/gutfeld), so too do weekly Substacks. The problem is made up, my manufactured outrage against [Xbox’s power saving mode](https://gamerant.com/fox-news-unhappy-xbox-power-saving-mode/),[^7] for the likes and subscribes and MyPillow advertising dollars.

But, the absence of a definition is, at least for us squawking clowns, an intellectually startling realization. It suggests that the data stacks don’t have to have a traditional warehouse at their center, because today’s warehouse is a [skeuomorph](https://en.wikipedia.org/wiki/Skeuomorph). It’s an aesthetic echo of a bygone era, and its actual architecture—[streaming](https://materialize.com/), [serverless](https://aws.amazon.com/rds/aurora/serverless/), [storageless](https://www.dremio.com/platform/sonar/)—can be wildly different from what might’ve assumed was required.

Another such wild architecture? dbt on S3. 

The rough idea is simple enough. When queries get run through dbt’s SQL proxy (this is the thing that intercepts queries with Jinja and metric references in them, and renders them into pure SQL), it doesn’t hand the query off to an database; it instead compiles the query again into something that can be executed against files in S3. A dbt Server processes the job, by reading data out of S3 and writing the results back out as a new file.[^8] 

Josh Wills’ [DuckDB client for dbt](https://github.com/jwills/dbt-duckdb) shows what this could look like, and Jacob Matson’s [modern data stack in a box](https://duckdb.org/2022/10/12/modern-data-stack-in-a-box.html) shows how it could be used. As Jacob says, removing the traditional database and running the entire thing on bare compute services could save money and depend only on open-source software. Though his example is more of an experimental prototype than enterprise product, its general pitch could be similar to that of DuckDB itself—huge and complex data platforms [are overpowered](https://motherduck.com/blog/big-data-is-dead/) for most of what we need them to do.  

It could also be just the beginning. What if the [dbt sources](https://docs.getdbt.com/docs/build/sources) didn’t have to point to tables in a database, but could reference any data source, from files in S3 to Google Sheets? What if Transform’s models inside of dbt could be defined across those sources? What if the semantic layer—be it dbt, LookML, Malloy, or any other potentially independent semantic configuration—isn’t just an encoding of join keys and metric formulas on top of a database, but is an [organizational ERD](https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model) that describes how entities are related across data sources and apps? What if we modeled our business rather than just our data?

These ideas aren’t exactly novel either; [the Modern Data Company](https://themoderndatacompany.com/) is building something similar with their [DataOS](https://themoderndatacompany.com/dataos/)(®), and I might be describing a data mesh in cheaper language.[^9] But whatever you call it, it seems likely that the next decade’s data warehouses—even if they’re still called that—will be as unrecognizable to us as [floppy disks are to teenagers](https://www.cnet.com/culture/surprise-kids-dont-know-what-the-save-icon-stands-for/). 

# An iPod, a phone, and an internet communicator

The thing is, I don’t think it had to be this way.

In his famous launch announcement of the iPhone, Steve Jobs had a choice. He could’ve decided that the device’s combination of features—[an iPod, a phone, and an internet communicator](https://youtu.be/wGoM_wVrwng?t=82)—transcended the traditional telephone. “This is not a phone,” he could have said, “it’s a personal communication platform.” 

Instead, he went the other direction. “Today,” [he actually said](https://youtu.be/wGoM_wVrwng?t=177), “Apple is going to reinvent the phone.” Implied in his announcement: A phone isn’t something that just makes calls and sends texts anymore, but does dozens of things, all at once. 

It’s always struck me as a little odd that ambitious warehouse vendors took the opposite approach with their flagship products. Snowflake, for instance, has largely moved away from calling itself a [database](https://www.google.com/search?q=site%3Asnowflake.com+-inurl%3Adocs.snowflake.com+database&rlz=1C5GCEM_enUS1043US1043&sxsrf=AJOqlzULhrKqIh6Z1S5J7e9j6RqOjbvGfw%3A1677826398518&ei=XpkBZPKQH9rj5NoP26iVsAs&ved=0ahUKEwjyt-mzlr_9AhXaMVkFHVtUBbYQ4dUDCBA&uact=5&oq=site%3Asnowflake.com+-inurl%3Adocs.snowflake.com+database&gs_lcp=Cgxnd3Mtd2l6LXNlcnAQA0oECEEYAVCuC1izNmDON2gFcAB4AIABVYgBpwSSAQIxMZgBAKABAcABAQ&sclient=gws-wiz-serp) in favor of the [data cloud](https://www.google.com/search?q=site%3Asnowflake.com+-inurl%3Adocs.snowflake.com+%22data+cloud%22&rlz=1C5GCEM_enUS1043US1043&sxsrf=AJOqlzUIgJ_5p8CKdRpstOvPVm0WzAjTUA%3A1677826390451&ei=VpkBZJSVG96g5NoPmJKbuAM&ved=0ahUKEwiUmP2vlr_9AhVeEFkFHRjJBjcQ4dUDCBA&uact=5&oq=site%3Asnowflake.com+-inurl%3Adocs.snowflake.com+%22data+cloud%22&gs_lcp=Cgxnd3Mtd2l6LXNlcnAQA0oECEEYAVDoClj6JGDzJ2gCcAB4AIABVogB6ASSAQIxMpgBAKABAcABAQ&sclient=gws-wiz-serp). I get the reasoning; the platform does a lot more than your everyday database. But for Snowflake, I think that’s a missed opportunity. Rather than rebranding themselves, they could’ve rebranded the data warehouse. They could’ve said, as Steve Jobs did, that they reinvented the database. They aren’t a warehouse with lots of extra features; they’re just a warehouse—and for anyone else to be one, they have to have those same features. The only thing better than being a category creator is being the pacesetter in a category that everyone already buys from. (Counterpoint: They’ve got [1.938 billion reasons](https://investors.snowflake.com/news/news-details/2023/Snowflake-Reports-Financial-Results-for-the-Fourth-Quarter-and-Full-Year-of-Fiscal-2023/) to keep doing it their way). 


---


[^1]: It’s not the modern data stack; it’s *[Pax data](https://en.wikipedia.org/wiki/Pax_Europaea). *(*Datum*? *Datum*? *Dor*? [Grammar is above my pay grade too](https://www.online-latin-dictionary.com/latin-english-dictionary.php?parola=data)).

[^2]: [“I’m not bi! i’m not bi!!”, i continue to insist as i slowly shrink and transform into bi.](https://www.linkedin.com/posts/benn-stancil_im-not-that-old-categoryim-not-that-old-activity-7036419804676673537-BXc1)

[^3]: To be clear, once this happens, I’ll be moving on to talk about [Pitbull](https://twitter.com/bennstancil/status/1379534830740893703).

[^4]: My theory on aliens: They *were* out there, and *will be* out there, but they aren’t out there now. There are roughly [one trillion planets](https://earthsky.org/space/how-and-when-did-the-first-planets-form-in-our-universe/) (what) in the Milky Way, some of which surely could produce intelligent life. But the Milky Way is also 13 billion years old, so the odds of that our window of galactic availability overlaps with that of some other species—that we are both in between the time we’ve developed technology that can communicate with the cosmos and the time we kill ourselves with it—isn’t that high. Or, as Wikipedia’s entry on the [Drake equation](https://en.wikipedia.org/wiki/Drake_equation#:~:text=we%20are%20probably%20alone%20in%20this%20galaxy%2C%20and%20possibly%20in%20the%20observable%20universe.) put it, under one set of (disputed) assumptions, “we are probably alone in this galaxy, and possibly in the observable universe.” Anyway, back to the important stuff: The future of data warehousing over the next 24 months.

[^5]: In their dictionary, Frankenstein is the monster, because the aliens are Good.

[^6]: Troublingly, most blog posts I found about [why](https://www.safe.com/blog/2021/01/excel-not-database/) [Excel](https://www.easasoftware.com/spreadsheets/is-excel-a-database) [isn’t](https://www.solving-finance.com/post/excel-is-not-a-database) [a](http://valentina-db.com/docs/dokuwiki/v8/doku.php?id=valentina:products:adk:v4rev:howto:databases_from_zero:what_is_in_a_database_and_why_excel_isnt_a_database) [database](https://channelmix.com/blog/excel-is-not-a-database/) don’t answer that question at all, and just explain why Excel *shouldn’t be* a database. But is it one? Seems like it could well be.

[^7]: In fairness to myself—and honestly, probably Fox News—[I at least proofread these things.](https://twitter.com/pmarca/status/1630623768094867457)

[^8]: *I think* this is the same thing as saying dbt could be a [data lakehouse](https://www.databricks.com/blog/2020/01/30/what-is-a-data-lakehouse.html), which is, as best I can tell, a query engine that runs on top of files in cloud storage tools like S3. But I don’t really know, because data lakehouses are rarely described in plain language. This has always seemed a little suspicious to me. [Good ideas don’t need to be lied about to gain public acceptance](https://blog.danieldavies.com/2004_05_23_d-squareddigest_archive.html); good technology doesn’t need to be exaggerated or obfuscated and dressed up in [dizzying corporate doublespeak](https://www.vulture.com/2020/02/spread-of-corporate-speak.html) to prove its value. Or maybe this sort of language—”no matter the workload, leverage all your data assets instantly with our new high-concurrency data lakehouse that treats data as code”—is how bank CIOs communicate. If you have to ask someone to explain it, [you can’t afford it](https://www.youtube.com/watch?v=i0CW39q0TrY).

[^9]: Ibid.